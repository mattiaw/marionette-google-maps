{"version":3,"sources":["../src/models/MarkerModel.js","../src/collections/MarkersCollection.js","../src/views/MarkerView.js","../src/views/MapView.js"],"names":[],"mappings":"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","file":"marionette-google-maps.js","sourcesContent":["Backbone.Marionette.MarkerModel = Backbone.Model.extend({\n    defaults: {\n        title: '',\n        content: '',\n        lat: null,\n        lon: null\n    }\n});","Backbone.Marionette.MarkersCollection = Backbone.Collection.extend({\n    model: Backbone.Marionette.MarkerModel\n});","Backbone.Marionette.MarkerView = Backbone.Marionette.ItemView.extend({\n\n    template: '<h2><%= title %></h2><div class=\"content\"><%= content %></div>',\n\n    constructor: function(options) {\n\n        if (typeof google === 'undefined' || typeof google.maps === 'undefined') {\n            throw new Error('MarkerView needs google maps library');\n        }\n\n        if (typeof options.map === 'undefined' || typeof options.bounds === 'undefined') {\n            throw new Error('MarkerView needs a \\'options.map\\' object');   \n        }\n\n        Backbone.Marionette.ItemView.apply(this, arguments);\n\n        if (typeof this.model === 'undefined' || this.model.get('lat') === null || this.model.get('lon') === null) {\n            throw new Error('This view needs a model with \\'lat\\' and \\'lon\\' attributes');\n        }\n\n        this.marker = new google.maps.Marker({\n            position: new google.maps.LatLng(this.model.get('lat'), this.model.get('lon')),\n            map: this.options.map,\n            title: this.model.get('title')\n        });\n\n        this.options.bounds.extend(this.marker.position);\n        this.options.map.fitBounds(this.options.bounds);\n\n        this.infowindow = new google.maps.InfoWindow({\n            content: _.template(this.template, this.model.toJSON())\n        });\n\n        // google events way\n        this.markerListener = google.maps.event.addListener(this.marker, 'click', _.bind(this.openWindow, this));\n        this.mapListener = google.maps.event.addListener(this.options.map, 'open:infowindow', _.bind(this.closeWindow, this));\n\n        return this;\n    },\n    render: function() {\n        return this.marker;\n    },\n\n    openWindow: function() {\n        google.maps.event.trigger(this.options.map, 'open:infowindow');\n        this.infowindow.open(this.options.map, this.marker);\n    },\n\n    closeWindow: function() {\n        this.infowindow.close();\n    },\n\n    remove: function() {\n        this.stopListening();\n        google.maps.event.removeListener(this.markerListener);\n        google.maps.event.removeListener(this.mapListener);\n        if (this.$el) {\n            this.$el.remove();\n        }\n        this.marker.setMap(null);\n        delete this.marker;\n        return this;\n    }\n});","Backbone.Marionette.MapView = Backbone.Marionette.CollectionView.extend({\n    el: '#map',\n    childView: Backbone.Marionette.MarkerView,\n    options: {},\n    bounds: null,\n    mapOptions: {\n        zoom: 13,\n        maxZoom: 16,\n        attributionControl: false,\n        panControl: false,\n        scaleControl: true\n    },\n    constructor: function(options) {\n\n        if (typeof google === 'undefined' || typeof google.maps === 'undefined') {\n            throw new Error('MapView needs google maps library');\n        }\n\n        Backbone.Marionette.CollectionView.apply(this, arguments);\n\n        // creates the map\n        this.setMapOptions();\n        this.bounds = new google.maps.LatLngBounds();\n        this.map = new google.maps.Map(this.$el[0], this.mapOptions);\n\n        // child options options\n        this.childViewOptions = {\n            map: this.map,\n            bounds: this.bounds\n        };\n\n        return this;\n    },\n    initialize: function() {\n        return this;\n    },\n    setMapOptions: function() {\n        // map options\n        if (this.options.lat && this.options.lon) {\n            this.mapOptions.center = new google.maps.LatLng(this.options.lat, this.options.lon);\n        }\n\n        this.mapOptions.mapTypeControlOptions = {\n            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU\n        };\n    },\n    render: function() {\n        return this.$el;\n    },\n    onRender: function() {\n        this.map.fitBounds(this.bounds);\n    },\n    refreshResize: function() {\n        google.maps.event.trigger(this.map, 'resize');\n        this.map.fitBounds(this.bounds);\n    }\n});"]}